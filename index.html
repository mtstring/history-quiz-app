<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ­´å²ãƒ†ã‚¹ãƒˆã‚¢ãƒ—ãƒª - ç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ¦ã¨æ—¥æœ¬</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 15px;
            background-color: #f0f2f5;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            line-height: 1.6;
        }
        .container {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 700px;
            box-sizing: border-box;
        }
        h1 {
            text-align: center;
            color: #1d3557;
            font-size: 1.5em;
            margin-bottom: 20px;
        }
        .quiz-area, .result-area {
            margin-bottom: 20px;
        }
        .question-number {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
            text-align: right;
        }
        .question-text {
            font-size: 1.1em;
            margin-bottom: 15px;
            color: #457b9d;
            font-weight: bold;
        }
        .answer-input {
            width: calc(100% - 24px); /* padding and border */
            padding: 12px;
            font-size: 1em;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-sizing: border-box;
            margin-bottom: 15px;
        }
        .button-area {
            text-align: center;
            margin-bottom: 15px;
        }
        .button {
            background-color: #4a90e2; /* ã‚ˆã‚Šé®®ã‚„ã‹ãªé’ */
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1em;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            transition: background-color 0.2s ease;
        }
        .button:hover {
            background-color: #357abd; /* ãƒ›ãƒãƒ¼æ™‚ã®è‰²ã‚’å°‘ã—æš—ã */
        }
        .button:disabled {
            background-color: #b0c4de;
            cursor: not-allowed;
        }
        .feedback-area {
            margin-top: 15px;
            padding: 12px;
            border-radius: 6px;
            font-weight: bold;
            text-align: center;
        }
        .correct {
            background-color: #d1e7dd; /* ã‚ˆã‚Šã‚½ãƒ•ãƒˆãªç·‘ */
            color: #0f5132;
            border: 1px solid #a3cfbb;
        }
        .incorrect {
            background-color: #f8d7da;
            color: #842029;
            border: 1px solid #f1aeb5;
        }
        .result-area h2 {
            color: #1d3557;
            text-align: center;
        }
        .result-area p {
            font-size: 1.2em;
            text-align: center;
            color: #457b9d;
        }
        .progress-bar-container {
            width: 100%;
            background-color: #e9ecef;
            border-radius: 6px;
            margin-bottom: 20px;
            height: 22px;
            overflow: hidden; /* è§’ä¸¸ã‚’ç¶­æŒã™ã‚‹ãŸã‚ */
        }
        .progress-bar {
            width: 0%;
            height: 100%;
            background-color: #28a745; /* æ˜ã‚‹ã„ç·‘ */
            border-radius: 6px 0 0 6px; /* å·¦å´ã ã‘è§’ä¸¸ã€å³å´ã¯ã‚³ãƒ³ãƒ†ãƒŠã«ä¾å­˜ */
            text-align: center;
            line-height: 22px;
            color: white;
            font-size: 0.85em;
            font-weight: bold;
            transition: width 0.3s ease-in-out;
        }
        /* ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§å…¥åŠ›æ¬„ãŒã‚ºãƒ¼ãƒ ã•ã‚Œã‚‹ã®ã‚’é˜²ã */
        @media screen and (max-width: 768px) {
            .answer-input, .button {
                font-size: 16px; /* 16pxæœªæº€ã ã¨iOSã§ã‚ºãƒ¼ãƒ ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹ */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ¦ã¨æ—¥æœ¬ ãƒ†ã‚¹ãƒˆ</h1>
        <div id="quiz-area">
            <div class="progress-bar-container">
                <div class="progress-bar" id="progress-bar">0%</div>
            </div>
            <div id="question-number" class="question-number"></div>
            <div class="question-area">
                <p class="question-text" id="question-text"></p>
                <input type="text" id="answer-input" class="answer-input" placeholder="ç­”ãˆã‚’å…¥åŠ›">
            </div>
            <div class="button-area">
                <button id="submit-button" class="button">å›ç­”ã™ã‚‹</button>
                <button id="next-button" class="button" style="display:none;">æ¬¡ã®å•é¡Œã¸</button>
            </div>
            <div id="feedback-area" class="feedback-area" style="display:none;"></div>
        </div>
        <div id="result-area" class="result-area" style="display:none;">
            <h2>ãƒ†ã‚¹ãƒˆçµæœ</h2>
            <p id="score-text"></p>
            <button id="restart-button" class="button">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹</button>
        </div>
    </div>

    <script>
        // å•é¡Œãƒ‡ãƒ¼ã‚¿: q = å•é¡Œæ–‡, a = æ­£è§£ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã®é…åˆ— (ã²ã‚‰ãŒãªã€ã‚«ã‚¿ã‚«ãƒŠã€æ¼¢å­—ã€ç•¥ç§°ãªã©è¤‡æ•°ã®æ­£è§£ã‚’è¨±å®¹)
        const questions = [
            { q: "(1) 1931å¹´ã€æ—¥æœ¬ãŒå—æº€å·é‰„é“ã‚’çˆ†ç ´ã—ã¦ã€æº€å·å…¨åœŸã‚’å é ˜ã—ãŸã§ãã”ã¨ã‚’ä½•ã¨ã„ã„ã¾ã™ã‹ã€‚", a: ["æº€å·äº‹å¤‰", "ã¾ã‚“ã—ã‚…ã†ã˜ã¸ã‚“"] },
            { q: "(2) (1)ã®ã§ãã”ã¨ãŒãã£ã‹ã‘ã¨ãªã£ã¦ã€æ—¥æœ¬ãŒè„±é€€ã—ãŸå›½éš›æ©Ÿé–¢ã‚’ä½•ã¨ã„ã„ã¾ã™ã‹ã€‚", a: ["å›½éš›é€£ç›Ÿ", "ã“ãã•ã„ã‚Œã‚“ã‚ã„"] },
            { q: "(3) 1932å¹´ã€æµ·è»ã®é’å¹´å°†æ ¡ã‚‰ãŒçŠ¬é¤Šæ¯…é¦–ç›¸ã‚’æš—æ®ºã—ãŸäº‹ä»¶ã‚’ä½•ã¨ã„ã„ã¾ã™ã‹ã€‚", a: ["äº”ãƒ»ä¸€äº”äº‹ä»¶", "ã”ã„ã¡ã”ã˜ã‘ã‚“", "515äº‹ä»¶", "ï¼•ï¼‘ï¼•äº‹ä»¶", "äº”ä¸€äº”äº‹ä»¶"] },
            { q: "(4) 1936å¹´ã€é™¸è»ã®é’å¹´å°†æ ¡ã‚‰ãŒã€æœ‰åŠ›ãªæ”¿æ²»å®¶ã‚‰ã‚’ãŠãã£ãŸäº‹ä»¶ã‚’ä½•ã¨ã„ã„ã¾ã™ã‹ã€‚", a: ["äºŒãƒ»äºŒå…­äº‹ä»¶", "ã«ã«ã‚ãã˜ã‘ã‚“", "226äº‹ä»¶", "ï¼’ï¼’ï¼–äº‹ä»¶", "äºŒäºŒå…­äº‹ä»¶"] },
            { q: "(5) 1937å¹´ã€åŒ—äº¬éƒŠå¤–ã®ç›§æºæ©‹ã§ã®ä¸­å›½è»ã¨ã®è¡çªã‹ã‚‰å§‹ã¾ã£ãŸæˆ¦äº‰ã‚’ä½•ã¨ã„ã„ã¾ã™ã‹ã€‚", a: ["æ—¥ä¸­æˆ¦äº‰", "ã«ã£ã¡ã‚…ã†ã›ã‚“ãã†", "ç›§æºæ©‹äº‹ä»¶", "ã‚ã“ã†ãã‚‡ã†ã˜ã‘ã‚“"] },
            { q: "(6) æ”¿åºœãŒæˆ¦æ™‚ä½“åˆ¶ã‚’å¼·åŒ–ã™ã‚‹ãŸã‚ã«ã€å›½æ°‘ã‚„ç‰©è³‡ã®ã™ã¹ã¦ã‚’æˆ¦äº‰ã«å‹•å“¡ã§ãã‚‹ã‚ˆã†ã«ã—ãŸæ³•å¾‹ã‚’ä½•ã¨ã„ã„ã¾ã™ã‹ã€‚", a: ["å›½å®¶ç·å‹•å“¡æ³•", "ã“ã£ã‹ãã†ã©ã†ã„ã‚“ã»ã†"] },
            { q: "(7) ç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ¦ã¯ã€ãƒ‰ã‚¤ãƒ„ãŒã©ã“ã®å›½ã«ä¾µæ”»ã—ãŸã“ã¨ã‹ã‚‰å§‹ã¾ã‚Šã¾ã—ãŸã‹ã€‚", a: ["ãƒãƒ¼ãƒ©ãƒ³ãƒ‰", "ã½ãƒ¼ã‚‰ã‚“ã©"] },
            { q: "(8) 1940å¹´ã«æ—¥æœ¬ãƒ»ãƒ‰ã‚¤ãƒ„ãƒ»ã‚¤ã‚¿ãƒªã‚¢ãŒçµã‚“ã è»äº‹åŒç›Ÿã‚’ä½•ã¨ã„ã„ã¾ã™ã‹ã€‚", a: ["æ—¥ç‹¬ä¼Šä¸‰å›½åŒç›Ÿ", "ã«ã¡ã©ãã„ã•ã‚“ã”ãã©ã†ã‚ã„", "ä¸‰å›½åŒç›Ÿ", "ã•ã‚“ã”ãã©ã†ã‚ã„"] },
            { q: "(9) æ—¥æœ¬ã®å—æ–¹é€²å‡ºã«å¯¾ã—ã€ã‚¢ãƒ¡ãƒªã‚«ã¯çµŒæ¸ˆçš„ãªåœ§åŠ›ã‚’åŠ ãˆã€ã‚¤ã‚®ãƒªã‚¹ãƒ»ä¸­å›½ãƒ»ã‚ªãƒ©ãƒ³ãƒ€ã¨çµã‚“ã§å¯¾æŠ—ã—ã¾ã—ãŸãŒã€ã“ã‚Œã‚’è»éƒ¨ã¯ä½•ã¨ã‚ˆã‚“ã§ã„ã¾ã—ãŸã‹ã€‚", a: ["ABCDåŒ…å›²ç¶²", "ABCDãƒ©ã‚¤ãƒ³", "ã‚¨ãƒ¼ãƒ“ãƒ¼ã‚·ãƒ¼ãƒ‡ã‚£ãƒ¼ã»ã†ã„ã‚‚ã†", "ã‚¨ãƒ¼ãƒ“ãƒ¼ã‚·ãƒ¼ãƒ‡ã‚£ãƒ¼ãƒ©ã‚¤ãƒ³", "ABCDåŒ…å›²é™£", "abcdåŒ…å›²ç¶²"] },
            { q: "(10) å¤ªå¹³æ´‹æˆ¦äº‰ãŒå§‹ã¾ã£ãŸã®ã¯ã€è¥¿æš¦ä½•å¹´ã®ã“ã¨ã§ã™ã‹ã€‚", a: ["1941å¹´", "1941", "ï¼‘ï¼™ï¼”ï¼‘å¹´", "ï¼‘ï¼™ï¼”ï¼‘"] },
            { q: "(11) å¤ªå¹³æ´‹æˆ¦äº‰ã¯ã€æ—¥æœ¬æµ·è»ãŒãƒãƒ¯ã‚¤ã®ã©ã“ã‚’æ”»æ’ƒã—ãŸã“ã¨ãŒãã£ã‹ã‘ã«ãªã‚Šã¾ã—ãŸã‹ã€‚", a: ["çœŸç æ¹¾", "ã—ã‚“ã˜ã‚…ã‚ã‚“", "ãƒ‘ãƒ¼ãƒ«ãƒãƒ¼ãƒãƒ¼", "ã±ãƒ¼ã‚‹ã¯ãƒ¼ã°ãƒ¼"] },
            { q: "(12) ã‚¢ãƒ¡ãƒªã‚«ãŒåæ’ƒã«è»¢ã˜ã‚‹ãã£ã‹ã‘ã¨ãªã£ãŸã€æ—¥æœ¬ãŒæ•—åŒ—ã—ãŸ1942å¹´ã®æµ·æˆ¦ã‚’ä½•ã¨ã„ã„ã¾ã™ã‹ã€‚", a: ["ãƒŸãƒƒãƒ‰ã‚¦ã‚§ãƒ¼æµ·æˆ¦", "ã¿ã£ã©ã†ã‡ãƒ¼ã‹ã„ã›ã‚“"] },
            { q: "(13) ã‚¢ãƒ¡ãƒªã‚«è»ãŒä¸Šé™¸ã—æ¿€ã—ã„æˆ¦ã„ã®æœ«ã€ãŸãã•ã‚“ã®æ—¥æœ¬è»äººã¨ä½æ°‘ãŒçŠ ç‰²ã¨ãªã‚Šã€ã¤ã„ã«å é ˜ã•ã‚ŒãŸå ´æ‰€ã¯ã©ã“ã§ã™ã‹ã€‚", a: ["æ²–ç¸„", "ãŠããªã‚", "æ²–ç¸„çœŒ", "ãŠããªã‚ã‘ã‚“"] },
            { q: "(14) å¤ªå¹³æ´‹æˆ¦äº‰çµ‚çµã®éš›ã«ã€ã‚¢ãƒ¡ãƒªã‚«ãƒ»ã‚¤ã‚®ãƒªã‚¹ãƒ»ä¸­è¯æ°‘å›½ã®åã§ç™ºè¡¨ã•ã‚ŒãŸå®£è¨€ã‚’ä½•ã¨ã„ã„ã¾ã™ã‹ã€‚", a: ["ãƒãƒ„ãƒ€ãƒ å®£è¨€", "ã½ã¤ã ã‚€ã›ã‚“ã’ã‚“"] },
            { q: "(15) åŸå­çˆ†å¼¾ã‚’8æœˆ6æ—¥ã«æŠ•ä¸‹ã•ã‚ŒãŸéƒ½å¸‚ã¨ã€8æœˆ9æ—¥ã«æŠ•ä¸‹ã•ã‚ŒãŸéƒ½å¸‚ã¯ã€ãã‚Œãã‚Œã©ã“ã§ã™ã‹ã€‚ï¼ˆä¾‹: æ±äº¬ã€å¤§é˜ªï¼‰", a: ["åºƒå³¶ã€é•·å´", "åºƒå³¶ãƒ»é•·å´", "ã²ã‚ã—ã¾ã€ãªãŒã•ã", "ã²ã‚ã—ã¾ãƒ»ãªãŒã•ã", "åºƒå³¶ã¨é•·å´", "åºƒå³¶ é•·å´", "ãƒ’ãƒ­ã‚·ãƒã€ãƒŠã‚¬ã‚µã‚­", "ãƒ’ãƒ­ã‚·ãƒãƒ»ãƒŠã‚¬ã‚µã‚­"] },
            { q: "(16) æ—¥æœ¬ãŒ(14)ã®å®£è¨€ã‚’å—ã‘å…¥ã‚Œã¦é™ä¼ã—ãŸã®ã¯ã€è¥¿æš¦ä½•å¹´ã®ã“ã¨ã§ã™ã‹ã€‚", a: ["1945å¹´", "1945", "ï¼‘ï¼™ï¼”ï¼•å¹´", "ï¼‘ï¼™ï¼”ï¼•"] }
        ];

        let currentQuestionIndex = 0;
        let score = 0;

        const questionNumberEl = document.getElementById('question-number');
        const questionTextEl = document.getElementById('question-text');
        const answerInputEl = document.getElementById('answer-input');
        const submitButtonEl = document.getElementById('submit-button');
        const nextButtonEl = document.getElementById('next-button');
        const feedbackAreaEl = document.getElementById('feedback-area');
        const quizAreaEl = document.getElementById('quiz-area');
        const resultAreaEl = document.getElementById('result-area');
        const scoreTextEl = document.getElementById('score-text');
        const restartButtonEl = document.getElementById('restart-button');
        const progressBarEl = document.getElementById('progress-bar');

        function normalizeAnswer(str) {
            if (typeof str !== 'string') str = String(str);
            return str.normalize('NFKC') // å…¨è§’è‹±æ•°è¨˜å·ã‚’åŠè§’ã«ã€åŠè§’ã‚«ãƒŠã‚’å…¨è§’ã‚«ãƒŠã«ã€æ¿ç‚¹ãªã©ã‚’çµåˆæ–‡å­—ã«
                      .toLowerCase() // å°æ–‡å­—ã«çµ±ä¸€
                      .replace(/\s+/g, '') // ç©ºç™½ã‚’é™¤å»
                      .replace(/ãƒ¼/g, 'ãƒ¼') // é•·éŸ³ç¬¦ã¯ãã®ã¾ã¾ï¼ˆã‚«ã‚¿ã‚«ãƒŠã®é•·éŸ³ã¯ã²ã‚‰ãŒãªã«å¤‰æ›ã•ã‚Œãªã„ãŸã‚ï¼‰
                      .replace(/ãƒ»/g, '') // ä¸­é»’ç‚¹ã‚’é™¤å» (ä¾‹: äº”ãƒ»ä¸€äº”äº‹ä»¶)
                      .replace(/[ã€ï¼Œã€‚ï¼]/g, ''); // èª­ç‚¹ã€å¥ç‚¹ã‚’é™¤å»
        }
        
        function loadQuestion() {
            if (currentQuestionIndex < questions.length) {
                const currentQuestion = questions[currentQuestionIndex];
                questionNumberEl.textContent = `å•é¡Œ ${currentQuestionIndex + 1} / ${questions.length}`;
                questionTextEl.textContent = currentQuestion.q;
                answerInputEl.value = '';
                answerInputEl.disabled = false;
                answerInputEl.focus();
                feedbackAreaEl.style.display = 'none';
                submitButtonEl.style.display = 'inline-block';
                submitButtonEl.disabled = false;
                nextButtonEl.style.display = 'none';
                updateProgressBar();
            } else {
                showResults();
            }
        }
        
        function checkAnswer() {
            const userAnswer = answerInputEl.value.trim();
            if (userAnswer === "") {
                alert("ç­”ãˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
                return;
            }

            submitButtonEl.disabled = true; // å›ç­”ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–

            const currentQuestion = questions[currentQuestionIndex];
            const normalizedUserAnswer = normalizeAnswer(userAnswer);
            
            const isCorrect = currentQuestion.a.some(ans => normalizeAnswer(ans) === normalizedUserAnswer);

            answerInputEl.disabled = true;
            submitButtonEl.style.display = 'none';
            nextButtonEl.style.display = 'inline-block';
            nextButtonEl.focus(); // æ¬¡ã¸ãƒœã‚¿ãƒ³ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹
            feedbackAreaEl.style.display = 'block';

            if (isCorrect) {
                score++;
                feedbackAreaEl.innerHTML = '<strong>æ­£è§£ï¼</strong> ğŸ‰';
                feedbackAreaEl.className = 'feedback-area correct';
            } else {
                feedbackAreaEl.innerHTML = `<strong>ä¸æ­£è§£ã€‚</strong> æ­£è§£ã¯ã€Œ<span style="color:#c0392b;">${currentQuestion.a[0]}</span>ã€ã§ã™ã€‚`;
                feedbackAreaEl.className = 'feedback-area incorrect';
            }
        }

        function nextQuestion() {
            currentQuestionIndex++;
            loadQuestion();
        }

        function showResults() {
            quizAreaEl.style.display = 'none';
            resultAreaEl.style.display = 'block';
            scoreTextEl.textContent = `${questions.length} å•ä¸­ ${score} å•æ­£è§£ã—ã¾ã—ãŸï¼`;
            progressBarEl.style.width = '100%';
            progressBarEl.textContent = 'å®Œäº†!';
            restartButtonEl.focus();
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            quizAreaEl.style.display = 'block';
            resultAreaEl.style.display = 'none';
            loadQuestion();
        }

        function updateProgressBar() {
            const progress = ((currentQuestionIndex) / questions.length) * 100; // 0å•ç›®ã‹ã‚‰å§‹ã‚ã‚‹ã®ã§ã€currentQuestionIndexã§OK
            progressBarEl.style.width = progress + '%';
            progressBarEl.textContent = Math.round(progress) + '%';
            if (currentQuestionIndex === questions.length) { // å…¨å•çµ‚äº†æ™‚
                 progressBarEl.style.width = '100%';
                 progressBarEl.textContent = '100%';
            }
        }

        submitButtonEl.addEventListener('click', checkAnswer);
        nextButtonEl.addEventListener('click', nextQuestion);
        restartButtonEl.addEventListener('click', restartQuiz);
        answerInputEl.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                event.preventDefault(); // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã‚’é˜²ã
                if (submitButtonEl.style.display !== 'none' && !submitButtonEl.disabled) {
                    checkAnswer();
                } else if (nextButtonEl.style.display !== 'none') {
                    nextQuestion();
                }
            }
        });

        // åˆæœŸãƒ­ãƒ¼ãƒ‰
        loadQuestion();
    </script>
</body>
</html>
